windowFunctions["Select Users for Message"]=function(f){function i(){Cloud.Users.query(function(a){if(a.success)if(0==a.users.length)d.setData([{title:"No Users!"}]);else{for(var b=[],g=0,f=a.users.length;g<f;g++){var e=a.users[g],h=Ti.UI.createTableViewRow({title:e.first_name+" "+e.last_name,id:e.id});h.hasCheck=-1!=c.ids.indexOf(e.id);b.push(h)}d.setData(b)}else d.setData([{title:a.error&&a.message||a}]),error(a)})}var b=createWindow(),j=addBackButton(b),c=f.toSet,d=Ti.UI.createTableView({backgroundColor:"#fff",
top:j+u,bottom:0,data:[{title:"Loading, please wait..."}]});d.addEventListener("click",function(a){a.row.id&&(a.row.hasCheck=!a.row.hasCheck,a.row.hasCheck?(c.ids.push(a.row.id),c.names.push(a.row.title)):(a=c.ids.indexOf(a.row.id),c.ids.splice(a,1),c.names.splice(a,1)))});b.add(d);b.addEventListener("open",function(){i()});b.open()};