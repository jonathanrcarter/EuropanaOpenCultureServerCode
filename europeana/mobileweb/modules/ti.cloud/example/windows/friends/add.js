windowFunctions["Add Friends"]=function(){function g(b){Cloud.Users.showMe(function(a){a.success?b(a.users[0].id):(e.setData([{title:a.error&&a.message||a}]),error(a))})}function h(b){Cloud.Users.query(function(a){if(a.success){var c=[];c.push({title:"Send Friend Request!"});for(var d=0,g=a.users.length;d<g;d++)if(a.users[d].id!=b){var f=a.users[d],f=Ti.UI.createTableViewRow({title:f.first_name+" "+f.last_name,id:f.id});c.push(f)}1>=c.length?e.setData([{title:"No Other Users"}]):e.setData(c)}else e.setData([{title:a.error&&
a.message||a}]),error(a)})}var d=createWindow(),i=addBackButton(d),c=[],e=Ti.UI.createTableView({backgroundColor:"#fff",top:i+u,bottom:0,data:[{title:"Loading, please wait..."}]});e.addEventListener("click",function(b){b.row.id?(b.row.hasCheck=!b.row.hasCheck,b.row.hasCheck?c.push(b.row.id):c.splice(c.indexOf(b.row.id),1)):0==c.length?alert("No users selected"):Cloud.Friends.add({user_ids:c.join(",")},function(a){a.success?alert("Friend(s) added"):error(a)})});d.add(e);d.addEventListener("open",function(){g(h)});
d.open()};