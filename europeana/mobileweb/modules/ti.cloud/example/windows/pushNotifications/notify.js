windowFunctions.Notify=function(){function i(){d.title=e?"Push Goes to Friends":"Push Goes to User"}function j(){for(var a=0;a<c.length;a++){if(!c[a].value.length){c[a].focus();return}c[a].blur()}f.hide();var a={channel:g.value},b=h.value;if(0<=b.indexOf("{"))try{a.payload=JSON.parse(b)}catch(d){alert("Failed to parse: "+d.message);return}else a.payload=b;e&&(a.friends=!0);Cloud.PushNotifications.notify(a,function(a){a.success?alert("Notified!"):error(a);f.show()})}var b=createWindow(),a=addBackButton(b),
a=Ti.UI.createScrollView({top:a+u,contentHeight:"auto",layout:"vertical"});b.add(a);var g=Ti.UI.createTextField({hintText:"Channel",top:10+u,left:10+u,right:10+u,height:40+u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,autocorrect:!1});a.add(g);var h=Ti.UI.createTextField({hintText:"Payload (String or JSON)",top:10+u,left:10+u,right:10+u,height:40+u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,
autocorrect:!1});a.add(h);var e=!1,d=Ti.UI.createButton({top:10+u,left:10+u,right:10+u,bottom:10+u,height:40+u});d.addEventListener("click",function(){e=!e;i()});a.add(d);i();var f=Ti.UI.createButton({title:"Notify",top:10+u,left:10+u,right:10+u,bottom:10+u,height:40+u});a.add(f);var c=[g,h];f.addEventListener("click",j);for(a=0;a<c.length;a++)c[a].addEventListener("return",j);b.addEventListener("open",function(){g.focus()});b.open()};