windowFunctions["Update Current User"]=function(){function m(){if(c.value!=d.value)alert("Password and Confirm Password do not match."),d.focus();else{for(var a=0;a<g.length;a++)g[a].blur();h.hide();a={username:e.value,email:i.value,first_name:j.value,last_name:k.value,tags:l.value};0<c.value.length&&(a.password=c.value,a.password_confirmation=d.value,c.value=d.value="");Cloud.Users.update(a,function(a){a.success?alert("Updated!"):error(a);h.show()})}}var f=createWindow(),n=addBackButton(f),b=Ti.UI.createScrollView({top:n+
u,contentHeight:"auto",layout:"vertical"});f.add(b);var e=Ti.UI.createTextField({hintText:"Username",top:10+u,left:10+u,right:10+u,height:40+u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,autocorrect:!1});b.add(e);var i=Ti.UI.createTextField({hintText:"Email",top:10+u,left:10+u,right:10+u,height:40+u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,keyboardType:Ti.UI.KEYBOARD_EMAIL});b.add(i);var c=Ti.UI.createTextField({hintText:"Password",top:10+u,
left:10+u,right:10+u,height:40+u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,passwordMask:!0});b.add(c);var d=Ti.UI.createTextField({hintText:"Confirm Password",top:10+u,left:10+u,right:10+u,height:40+u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,passwordMask:!0});b.add(d);var j=Ti.UI.createTextField({hintText:"First Name",top:10+u,left:10+u,right:10+u,height:40+u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});b.add(j);var k=Ti.UI.createTextField({hintText:"Last Name",top:10+u,left:10+u,right:10+u,
height:40+u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});b.add(k);var l=Ti.UI.createTextField({hintText:"Tags (csv)",top:10+u,left:10+u,right:10+u,height:40+u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,autocorrect:!1});b.add(l);var h=Ti.UI.createButton({title:"Update",top:10+u,left:10+u,right:10+u,bottom:10+u,height:40+u});b.add(h);var g=[e,i,c,d,j,k,l];h.addEventListener("click",m);for(b=0;b<g.length;b++)g[b].addEventListener("return",m);var o=
Ti.UI.createLabel({text:"Loading, please wait...",textAlign:"center",top:n+u,right:0,bottom:0,left:0,backgroundColor:"#fff",zIndex:2});f.add(o);f.addEventListener("open",function(){Cloud.Users.showMe(function(a){o.hide();a.success?(a=a.users[0],e.value=a.username,i.value=a.email,j.value=a.first_name,k.value=a.last_name,l.value=a.tags&&a.tags.join(","),e.focus()):error(a)})});f.open()};