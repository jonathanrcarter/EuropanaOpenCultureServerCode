Ti.include("selectUsersForGroup.js","showChatGroup.js");
windowFunctions.Chats=function(){function b(){c.setData([{title:"Loading, please wait..."}]);Cloud.Chats.getChatGroups(function(d){if(d.success){var a=[];a.push({title:"Create new group!"});for(var g=0,b=d.chat_groups.length;g<b;g++){for(var e=d.chat_groups[g],h="",f=0;f<e.participate_users.length;f++)h+=", "+e.participate_users[f].first_name+" "+e.participate_users[f].last_name;a.push(Ti.UI.createTableViewRow({title:h.substr(2),id:e.id}))}c.setData(a)}else error(d)})}var a=createWindow(),i=addBackButton(a),
c=Ti.UI.createTableView({backgroundColor:"#fff",top:i+u,bottom:0});c.addEventListener("click",function(a){a.row.id?handleOpenWindow({target:"Show Chat Group",id:a.row.id}):handleOpenWindow({target:"Select Users for Group"})});a.add(c);a.addEventListener("open",b);a.addEventListener("focus",b);a.open()};