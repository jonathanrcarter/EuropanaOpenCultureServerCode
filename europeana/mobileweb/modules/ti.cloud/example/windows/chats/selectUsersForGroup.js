windowFunctions["Select Users for Group"]=function(){function g(b){Cloud.Users.showMe(function(a){a.success?b(a.users[0].id):(d.setData([{title:a.error&&a.message||a}]),error(a))})}function j(b){Cloud.Users.query(function(a){if(a.success)if(0==a.users.length)d.setData([{title:"No Other Users! Cannot chat!"}]);else{var c=[];c.push({title:"Start Chatting!"});for(var h=0,g=a.users.length;h<g;h++){var e=a.users[h],i=Ti.UI.createTableViewRow({title:e.first_name+" "+e.last_name,id:e.id});e.id==b&&(i.isMyID=
i.hasCheck=f[e.id]=!0);c.push(i)}d.setData(c)}else d.setData([{title:a.error&&a.message||a}]),error(a)})}var c=createWindow(),k=addBackButton(c),f={},d=Ti.UI.createTableView({backgroundColor:"#fff",top:k+u,bottom:0,data:[{title:"Loading, please wait..."}]});d.addEventListener("click",function(b){if(b.row.id)b.row.isMyID||(b.row.hasCheck=!b.row.hasCheck,(f[b.row.id]=b.row.hasCheck)||delete f[b.row.id]);else{var b=[],a;for(a in f)f.hasOwnProperty(a)&&b.push(a);b.length?handleOpenWindow({target:"Show Chat Group",
ids:b}):alert("Please check at least one user!")}});c.add(d);c.addEventListener("open",function(){g(j)});c.open()};