windowFunctions["Create Event"]=function(){function l(){f.hide();var a={name:d.value},b;b=Date.parse(e.value+" "+g.value);if(isNaN(b))alert("Please enter a valid date/time"),e.focus();else{a.start_time=new Date(b);b=parseInt(h.value,10);isNaN(b)||(a.duration=b);if(0<c.value.length&&(a.recurring=c.value.toLowerCase(),!{daily:1,weekly:1,monthly:1,yearly:1}[a.recurring])){alert("Enter 'daily', 'weekly', 'monthly', or 'yearly'");c.focus();return}b=parseInt(i.value,10);isNaN(b)||(a.recurring_count=b);
Cloud.Events.create(a,function(a){a.success?(alert("Created!"),d.value=e.value=g.value=h.value=c.value=i.value=""):error(a);f.show()})}}var j=createWindow(),a=addBackButton(j),a=Ti.UI.createScrollView({top:a+u,contentHeight:"auto",layout:"vertical"});j.add(a);var d=Ti.UI.createTextField({hintText:"Name",top:10+u,left:10+u,right:10+u,height:40+u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});a.add(d);var e=Ti.UI.createTextField({hintText:"Date",top:10+u,left:10+u,right:10+u,height:40+u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});
a.add(e);var g=Ti.UI.createTextField({hintText:"Time",top:10+u,left:10+u,right:10+u,height:40+u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});a.add(g);var h=Ti.UI.createTextField({hintText:"Duration (seconds)",top:10+u,left:10+u,right:10+u,height:40+u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,keyboardType:Ti.UI.KEYBOARD_NUMBER_PAD});a.add(h);var c=Ti.UI.createTextField({hintText:"Recurring",top:10+u,left:10+u,right:10+u,height:40+u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE});
a.add(c);var i=Ti.UI.createTextField({hintText:"Recurring Count (0-1000)",top:10+u,left:10+u,right:10+u,height:40+u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,keyboardType:Ti.UI.KEYBOARD_NUMBER_PAD});a.add(i);var f=Ti.UI.createButton({title:"Create",top:10+u,left:10+u,right:10+u,bottom:10+u,height:40+u});a.add(f);f.addEventListener("click",l);for(var a=[d,e,g,h,c,i],k=0;k<a.length;k++)a[k].addEventListener("return",l);j.addEventListener("open",function(){d.focus()});j.open()};