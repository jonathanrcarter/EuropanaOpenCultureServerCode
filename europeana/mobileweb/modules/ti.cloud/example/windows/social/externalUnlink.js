windowFunctions["External Unlink"]=function(){function g(a){Cloud.SocialIntegrations.externalAccountUnlink({id:a.source.accountID,type:a.source.accountType},function(b){b.success?(alert("Unlinked from "+a.source.accountType+"!"),d.remove(a.source)):error(b)})}var c=createWindow(),e=addBackButton(c),d=Ti.UI.createScrollView({top:e+u,contentHeight:"auto",layout:"vertical"});c.add(d);var f=Ti.UI.createLabel({text:"Loading, please wait...",textAlign:"center",top:e+u,right:0,bottom:0,left:0,backgroundColor:"#fff",
zIndex:2});c.add(f);c.addEventListener("open",function(){Cloud.Users.showMe(function(a){f.hide();if(a.success)if(a=a.users[0],0==a.external_accounts.length)alert("No linked accounts");else for(var b=0;b<a.external_accounts.length;b++){var c=Ti.UI.createButton({title:"Unlink from "+a.external_accounts[b].external_type,top:10+u,left:10+u,right:10+u,bottom:10+u,height:40+u,accountType:a.external_accounts[b].external_type,accountID:a.external_accounts[b].external_id});c.addEventListener("click",g);d.add(c)}else error(a)})});
c.open()};