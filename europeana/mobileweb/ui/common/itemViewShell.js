var globals=require("/ui/common/globals"),css=require("/ui/common/css");
function fn(j,h){var i=function(a){var b=a.source.xindent,e=a.source.xcnt,a=a.source.xtyp;new (require("/ui/common/PlayWindow"))(b,e,a)};if(2==j){var a=Titanium.UI.createView({left:20,top:20,width:350,height:190,backgroundColor:"transparent",borderColor:"#000",borderWidth:0});Titanium.App.addEventListener("load-"+h,function(c){var b=c.item;try{a.remove(a.children[0])}catch(e){}a.ximage="http://jon651.glimworm.com/europeana/timthumb.php?w=350&h=250&a=t&q=50&src="+b.enclosure;a.ximage_backup=b.enclosure;
a.xinview=0;var d=Titanium.UI.createImageView({left:0,top:0,width:350,height:250,xinview:0,image:"/images/10x10.gif",defaultImage:"/images/10x10.gif",xcnt:h,xguid:b.guid,xindent:b.id,xtyp:b.type,borderColor:"#777",borderWidth:0});a.addEventListener("offscreen",function(){1==d.xinview&&(d.image="/images/10x10.gif");d.xinview=0});a.addEventListener("onscreen",function(){0==d.xinview&&(d.image=a.ximage);d.xinview=1});d.addEventListener("click",i);d.addEventListener("error",function(){Ti.API.info(a.ximage_backup);
a.ximage=a.ximage_backup;d.image=a.ximage_backup});Titanium.UI.createView({right:0,top:0,width:100,height:200,backgroundColor:"#000"});var c=Titanium.UI.createScrollView({left:0,bottom:0,contentWidth:"auto",contentHeight:"auto",width:350,height:50,backgroundColor:"#000",opacity:0.7}),b=Titanium.UI.createLabel({height:Ti.UI.SIZE,width:300,left:20,color:"#fff",text:b.title,font:{fontFamily:"arial"}}),f=Titanium.UI.createView({left:0,right:0,width:350,height:190,backgroundColor:"#000"});f.add(d);f.add(c);
c.add(b);a.add(f)});Titanium.App.addEventListener("clearall",function(){try{a.remove(a.children[0])}catch(c){}});Titanium.App.addEventListener("app-endscroll",function(c){try{if(a.children&&0!=a.children.length){var b=a.rect,e=a.getParent().rect,d=e.x+b.x,f=e.y+b.y,h=e.y+b.y+b.height,g=!0;e.x+b.x+b.width<c.x&&(g=!1);d>c.x+c.w&&(g=!1);h<c.y&&(g=!1);f>c.y+c.h&&(g=!1);!0==g?a.fireEvent("onscreen",{}):a.fireEvent("offscreen",{})}}catch(i){}})}else a=Titanium.UI.createView({left:20,top:20,width:250,height:120,
backgroundColor:"transparent",borderColor:"#00f",borderWidth:0}),Titanium.App.addEventListener("load-"+h,function(c){var b=c.item;try{a.remove(a.children[0])}catch(e){}a.ximage="http://jon651.glimworm.com/europeana/timthumb.php?w=250&h=250&a=t&q=50&src="+b.enclosure;a.ximage_backup=b.enclosure;a.xinview=0;var d=Titanium.UI.createImageView({left:0,top:0,width:250,height:250,xinview:0,backgroundColor:"#000",image:"/images/10x10.gif",defaultImage:"/images/10x10.gif",xcnt:h,xguid:b.guid,xindent:b.id,
xtyp:b.type,xguid:b.guid,borderColor:"#000",borderWidth:0});a.addEventListener("offscreen",function(){1==d.xinview&&(d.image="/images/10x10.gif");d.xinview=0});a.addEventListener("onscreen",function(){0==d.xinview&&(d.image=a.ximage);d.xinview=1});d.addEventListener("error",function(){Ti.API.info(a.ximage_backup);a.ximage=a.ximage_backup;d.image=a.ximage_backup});d.addEventListener("click",i);var c=Titanium.UI.createScrollView({left:0,bottom:0,contentWidth:"auto",contentHeight:"auto",width:250,height:50,
backgroundColor:"#000",opacity:0.7}),b=Titanium.UI.createLabel({height:Ti.UI.SIZE,width:200,color:"#fff",text:b.title,font:{fontFamily:"arial"}}),f=Titanium.UI.createView({left:0,right:0,top:0,bottom:0,backgroundColor:"#000",opacity:0});f.add(d);f.add(c);c.add(b);a.add(f);f.animate({opacity:1,duration:1500},function(){})}),Titanium.App.addEventListener("clearall",function(){try{a.remove(a.children[0])}catch(c){}}),Titanium.App.addEventListener("app-endscroll",function(c){try{if(a.children&&0!=a.children.length){var b=
a.rect,e=a.getParent().rect,d=e.x+b.x,f=e.y+b.y,h=e.y+b.y+b.height,g=!0;e.x+b.x+b.width<c.x&&(g=!1);d>c.x+c.w&&(g=!1);h<c.y&&(g=!1);f>c.y+c.h&&(g=!1);!0==g?a.fireEvent("onscreen",{}):a.fireEvent("offscreen",{})}}catch(i){}});return a}module.exports=fn;