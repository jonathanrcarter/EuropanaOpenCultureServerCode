var globals=require("/ui/common/globals"),css=require("/ui/common/css"),ajax=require("/helpers/ajax");
function fn(j,k){var b=Titanium.UI.createWindow({navBarHidden:!0,backgroundColor:"#fff"}),a=Titanium.UI.createButton({image:"/images/glyphicons_212_down_arrow.png"}),h=function(){b.close()};a.addEventListener("click",h);a=Titanium.UI.iOS.createToolbar({top:0,right:0,left:0,height:40,items:[a],barColor:"#000000",borderTop:!1,borderBottom:!0});b.add(a);a=Titanium.UI.createView({top:40,bottom:0,left:0,right:0,layout:"vertical"});b.add(a);a.add(Titanium.UI.createLabel({left:5,right:5,height:20,font:{fontFamily:"STHeitiTC-Medium"},
text:"to:"}));var e=Titanium.UI.createTextField({left:5,right:5,top:5,bottom:5,height:20,autocorrect:!1,autocapitalization:!1,backgroundColor:"#eeeeee"});a.add(e);var c=Titanium.UI.createButton({left:5,right:5,top:5,bottom:5,height:20,title:"ok"});a.add(c);var i=function(){var a=e.getValue();0==a.indexOf("http")?d.url=a:ajax.getdata({url:"http://aws2.glimworm.com/api.php",data:{action:"console-get-node",title:a},fn:function(a){Titanium.API.info(a);a.data&&a.data.self&&(d.url=a.data.self)}})};c.addEventListener("click",
i);e.addEventListener("enter",i);a.add(Titanium.UI.createLabel({left:5,right:5,height:20,font:{fontFamily:"STHeitiTC-Medium"},text:"Type:"}));var f=Titanium.UI.createTextField({left:5,right:5,top:5,bottom:5,height:20,autocorrect:!1,autocapitalization:!1,backgroundColor:"#eeeeee"});a.add(f);a.add(Titanium.UI.createLabel({left:5,right:5,height:20,font:{fontFamily:"STHeitiTC-Medium"},text:"Label:"}));c=Titanium.UI.createTextField({left:5,right:5,top:5,bottom:5,height:20,autocorrect:!1,autocapitalization:!1,
backgroundColor:"#eeeeee"});a.add(c);a.add(Titanium.UI.createLabel({left:5,right:5,height:20,font:{fontFamily:"STHeitiTC-Medium"},text:"URL:"}));var g=Titanium.UI.createTextField({left:5,right:5,top:5,bottom:5,height:20,autocorrect:!1,autocapitalization:!1,backgroundColor:"#eeeeee"}),c=Titanium.UI.createButton({left:5,right:5,top:5,bottom:5,height:20,title:"ADD"}),d=Titanium.UI.createWebView({left:5,right:5,top:5,bottom:5});c.addEventListener("click",function(){var a=g.getValue();0==a.indexOf("http://aws2.glimworm.com")?
ajax.getdata({url:"http://aws2.glimworm.com/api.php",data:{action:"console-add-link",from:j,to:a,type:f.getValue()},fn:function(){h()}}):ajax.getdata({url:"http://aws2.glimworm.com/api.php",data:{action:"console-add-node",title:a,lnk:a,type:f.getValue()},fn:function(a){Titanium.API.info(a);a.data&&a.data.self&&(d.url=a.data.self)}})});d.addEventListener("load",function(){g.setValue(d.getUrl())});a.add(g);a.add(c);a.add(d);1==k?globals.openmodal(b):(a=Titanium.UI.create2DMatrix(),b.transform=a.rotate(-90),
b.top=130,b.left=130,b.bottom=130,b.right=130,b.fullscreen=!0,b.open())}module.exports=fn;