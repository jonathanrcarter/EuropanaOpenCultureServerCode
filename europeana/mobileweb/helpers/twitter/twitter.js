Ti.include("/helpers/oauth_adapter.js");function twitter(){this.receivePin=this.oAuthAdapter=null}twitter.prototype.receivePin2=function(){this.oAuthAdapter.getAccessToken("http://twitter.com/oauth/access_token");this.oAuthAdapter.saveAccessToken("twitter")};
twitter.prototype.runQuery=function(c,d){null==this.oAuthAdapter&&(this.oAuthAdapter=new OAuthAdapter("qxgCLOFD2OySaGi6ap0rQIsC9rPpxuSDPMQ24LIdIXA","CuILKyM75vt3yucQGyswOQ","HMAC-SHA1"));this.oAuthAdapter.loadAccessToken("twitter");if("me"==c){var a=require("/helpers/twitter/user"),a=new a("twitter"),b=this.oAuthAdapter.sendraw("https://api.twitter.com/1/account/settings.json",[]);b&&null!=b&&(b=JSON.parse(b.responseText),a.username=b.screen_name,a.loggedin=!0);return a}if("logout"==c)return a=require("/helpers/twitter/user"),
a=new a("twitter"),this.oAuthAdapter.sendraw("https://api.twitter.com/1/account/end_session.json",[]),this.oAuthAdapter.removeAccessToken("twitter"),a;"connect"==c?this.oAuthAdapter.showAuthorizeUI("https://api.twitter.com/oauth/authorize?"+this.oAuthAdapter.getRequestToken("https://api.twitter.com/oauth/request_token"),this.receivePin2,this):("post"==c&&this.oAuthAdapter.send("https://api.twitter.com/1/statuses/update.json",[["status",d]],"Twitter","Published.","Not published."),!1==this.oAuthAdapter.isAuthorized()&&
this.oAuthAdapter.showAuthorizeUI("https://api.twitter.com/oauth/authorize?"+this.oAuthAdapter.getRequestToken("https://api.twitter.com/oauth/request_token"),this.receivePin2,this))};module.exports=twitter;