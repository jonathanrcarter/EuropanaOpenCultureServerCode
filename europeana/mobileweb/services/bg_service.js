Ti.API.info("hello from a background service");var $bg={};Ti.App.fireEvent("state_bg",{});
var notifications=[],notificationcnt=0,cition_notify=function(a){try{0<notificationcnt&&null!=notifications[notificationcnt-1]&&(notifications[notificationcnt-1].cancel(),notifications[notificationcnt-1]=null),notifications[notificationcnt]=Ti.App.iOS.scheduleLocalNotification({alertBody:"Uw parkeertijd vervalt in "+a.cition_text+" minuten",alertAction:"Re-Launch text (cnt:"+notificationcnt+")",userInfo:{},sound:"Cell Phone Ringing.caf",date:new Date((new Date).getTime()+2E3)}),notificationcnt++}catch(b){Ti.API.debug({from:"bg notify",
err:b,e:a})}};Ti.App.addEventListener("cition_notify",cition_notify);Ti.App.currentService.addEventListener("stop",function(){Ti.API.info("background service is stopped");Ti.App.removeEventListener("cition_notify",cition_notify);Titanium.App.iOS.cancelAllLocalNotifications();Ti.App.fireEvent("state_fg",{})});